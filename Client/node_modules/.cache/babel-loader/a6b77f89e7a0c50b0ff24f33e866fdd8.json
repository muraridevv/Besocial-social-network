{"ast":null,"code":"import _classCallCheck from \"G:\\\\WORKSPACE\\\\Project\\\\Besocial\\\\Besocial\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"G:\\\\WORKSPACE\\\\Project\\\\Besocial\\\\Besocial\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"G:\\\\WORKSPACE\\\\Project\\\\Besocial\\\\Besocial\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"G:\\\\WORKSPACE\\\\Project\\\\Besocial\\\\Besocial\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"G:\\\\WORKSPACE\\\\Project\\\\Besocial\\\\Besocial\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"G:\\\\WORKSPACE\\\\Project\\\\Besocial\\\\Besocial\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"G:\\\\WORKSPACE\\\\Project\\\\Besocial\\\\Besocial\\\\Client\\\\src\\\\components\\\\user\\\\UserAllPage.js\";\nimport React, { Component, Fragment } from 'react';\nimport { userService } from '../../infrastructure';\nimport UserRow from './UserRow';\nimport { toast } from 'react-toastify';\nimport { ToastComponent } from '../common';\nimport './css/UserAllPage.css';\nimport { connect } from 'react-redux';\nimport { fetchAllUsersAction, promoteUserAction, demoteUserAction, changeCurrentTimeLineUserAction, changeAllFriendsAction } from '../../store/actions/userActions';\nimport { changeAllPicturesAction } from '../../store/actions/pictureActions';\n\nvar UserAllPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserAllPage, _Component);\n\n  function UserAllPage(props) {\n    var _this;\n\n    _classCallCheck(this, UserAllPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserAllPage).call(this, props));\n\n    _this.promote = function (userId) {\n      _this.props.promoteUser(userId);\n    };\n\n    _this.demote = function (userId) {\n      _this.props.demoteUser(userId);\n    };\n\n    _this.changeTimeLineUser = function (userId) {\n      _this.props.changeTimeLineUser(userId);\n\n      _this.props.history.push(\"/home/profile/\".concat(userId));\n    };\n\n    _this.state = {\n      id: '',\n      userArr: []\n    };\n    _this.promote = _this.promote.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.demote = _this.demote.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.changeTimeLineUser = _this.changeTimeLineUser.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(UserAllPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var loggedInUserId = userService.getUserId();\n\n      if (loggedInUserId !== this.props.timeLineUserData.id) {\n        this.props.changeTimeLineUser(loggedInUserId);\n        this.props.changeAllPictures(loggedInUserId);\n        this.props.changeAllFriends(loggedInUserId);\n      }\n\n      this.props.loadAllUsers(loggedInUserId);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var loading = this.props.fetchAllUsers.loading || this.props.promoteUserData.loading || this.props.demoteUserData.loading;\n      var errorMessage = this.getErrorMessage(prevProps);\n      var successMessage = this.getSuccessMessage(prevProps);\n\n      if (errorMessage && !loading) {\n        toast.error(React.createElement(ToastComponent.errorToast, {\n          text: errorMessage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        }), {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      } else if (successMessage && !loading) {\n        toast.success(React.createElement(ToastComponent.successToast, {\n          text: successMessage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        }), {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n    }\n  }, {\n    key: \"getSuccessMessage\",\n    value: function getSuccessMessage(prevProps) {\n      if (!this.props.fetchAllUsers.hasError && this.props.fetchAllUsers.message && this.props.fetchAllUsers !== prevProps.fetchAllUsers) {\n        return this.props.fetchAllUsers.message;\n      }\n\n      if (!this.props.promoteUserData.hasError && this.props.promoteUserData.message && this.props.promoteUserData !== prevProps.promoteUserData) {\n        return this.props.promoteUserData.message;\n      }\n\n      if (!this.props.demoteUserData.hasError && this.props.demoteUserData.message && this.props.demoteUserData !== prevProps.demoteUserData) {\n        return this.props.demoteUserData.message;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getErrorMessage\",\n    value: function getErrorMessage(prevProps) {\n      if (this.props.fetchAllUsers.hasError && prevProps.fetchAllUsers.error !== this.props.fetchAllUsers.error) {\n        return this.props.fetchAllUsers.message || 'Server Error';\n      }\n\n      if (this.props.promoteUserData.hasError && prevProps.promoteUserData.error !== this.props.promoteUserData.error) {\n        return this.props.promoteUserData.message || 'Server Error';\n      }\n\n      if (this.props.demoteUserData.hasError && prevProps.demoteUserData.error !== this.props.demoteUserData.error) {\n        return this.props.demoteUserData.message || 'Server Error';\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"article\", {\n        className: \"main-article-shared-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"profile-content-section\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container col-md-10 text-center mb-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"text-center font-weight-bold mt-4\",\n        style: {\n          'margin': '1rem auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"All Users\"), React.createElement(\"table\", {\n        className: \"table table-hover mt-3 w-80 mx-auto text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        className: \"col-md-1\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"#\"), React.createElement(\"th\", {\n        className: \"col-md-2\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Username\"), React.createElement(\"th\", {\n        className: \"col-md-2\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Role\"), React.createElement(\"th\", {\n        className: \"col-md-7\",\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Actions\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, this.props.userArr.map(function (user, i) {\n        return React.createElement(UserRow, Object.assign({\n          key: user.id,\n          index: i + 1,\n          promote: _this2.promote,\n          demote: _this2.demote,\n          changeTimeLineUser: _this2.changeTimeLineUser\n        }, user, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }));\n      })))))));\n    }\n  }]);\n\n  return UserAllPage;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    timeLineUserData: state.timeLineUserData,\n    loggedInUserData: state.loggedInUserData,\n    userArr: state.fetchAllUsers.userArr,\n    fetchAllUsers: state.fetchAllUsers,\n    promoteUserData: state.promoteUserData,\n    demoteUserData: state.demoteUserData,\n    changeTimeLineUserData: state.changeTimeLineUserData,\n    changePicture: state.changePicture,\n    changeAllFriends: state.changeAllFriends\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    loadAllUsers: function loadAllUsers(userId) {\n      dispatch(fetchAllUsersAction(userId));\n    },\n    promoteUser: function promoteUser(userId) {\n      dispatch(promoteUserAction(userId));\n    },\n    demoteUser: function demoteUser(userId) {\n      dispatch(demoteUserAction(userId));\n    },\n    changeTimeLineUser: function changeTimeLineUser(userId) {\n      dispatch(changeCurrentTimeLineUserAction(userId));\n    },\n    changeAllFriends: function changeAllFriends(userId) {\n      dispatch(changeAllFriendsAction(userId));\n    },\n    changeAllPictures: function changeAllPictures(userId) {\n      dispatch(changeAllPicturesAction(userId));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserAllPage);","map":{"version":3,"sources":["G:\\WORKSPACE\\Project\\Besocial\\Besocial\\Client\\src\\components\\user\\UserAllPage.js"],"names":["React","Component","Fragment","userService","UserRow","toast","ToastComponent","connect","fetchAllUsersAction","promoteUserAction","demoteUserAction","changeCurrentTimeLineUserAction","changeAllFriendsAction","changeAllPicturesAction","UserAllPage","props","promote","userId","promoteUser","demote","demoteUser","changeTimeLineUser","history","push","state","id","userArr","bind","loggedInUserId","getUserId","timeLineUserData","changeAllPictures","changeAllFriends","loadAllUsers","prevProps","prevState","loading","fetchAllUsers","promoteUserData","demoteUserData","errorMessage","getErrorMessage","successMessage","getSuccessMessage","error","position","POSITION","TOP_RIGHT","success","hasError","message","map","user","i","mapStateToProps","loggedInUserData","changeTimeLineUserData","changePicture","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport {userService} from '../../infrastructure';\nimport UserRow from './UserRow';\nimport { toast } from 'react-toastify';\nimport { ToastComponent } from '../common';\nimport './css/UserAllPage.css';\n\nimport { connect } from 'react-redux';\nimport {\n    fetchAllUsersAction, promoteUserAction, demoteUserAction,\n    changeCurrentTimeLineUserAction, changeAllFriendsAction\n} from '../../store/actions/userActions';\nimport { changeAllPicturesAction } from '../../store/actions/pictureActions';\n\nclass UserAllPage extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            id: '',\n            userArr: [],\n        };\n\n        this.promote = this.promote.bind(this);\n        this.demote = this.demote.bind(this);\n        this.changeTimeLineUser = this.changeTimeLineUser.bind(this);\n    }\n\n    componentDidMount() {\n        const loggedInUserId = userService.getUserId();\n\n        if (loggedInUserId !== this.props.timeLineUserData.id) {\n            this.props.changeTimeLineUser(loggedInUserId);\n            this.props.changeAllPictures(loggedInUserId);\n            this.props.changeAllFriends(loggedInUserId);\n        }\n      \n        this.props.loadAllUsers(loggedInUserId);\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        const loading = this.props.fetchAllUsers.loading ||\n            this.props.promoteUserData.loading || this.props.demoteUserData.loading;\n\n        const errorMessage = this.getErrorMessage(prevProps);\n        const successMessage = this.getSuccessMessage(prevProps)\n\n        if (errorMessage && !loading) {\n            toast.error(<ToastComponent.errorToast text={errorMessage} />, {\n                position: toast.POSITION.TOP_RIGHT\n            });\n        } else if (successMessage && !loading) {\n            toast.success(<ToastComponent.successToast text={successMessage} />, {\n                position: toast.POSITION.TOP_RIGHT\n            });\n        }\n    }\n\n    getSuccessMessage(prevProps) {\n        if (!this.props.fetchAllUsers.hasError && this.props.fetchAllUsers.message && this.props.fetchAllUsers !== prevProps.fetchAllUsers) {\n            return this.props.fetchAllUsers.message;\n        }\n        if (!this.props.promoteUserData.hasError && this.props.promoteUserData.message && this.props.promoteUserData !== prevProps.promoteUserData) {\n            return this.props.promoteUserData.message;\n        }\n        if (!this.props.demoteUserData.hasError && this.props.demoteUserData.message && this.props.demoteUserData !== prevProps.demoteUserData) {\n            return this.props.demoteUserData.message;\n        }\n\n        return null;\n    }\n\n    getErrorMessage(prevProps) {\n        if (this.props.fetchAllUsers.hasError && prevProps.fetchAllUsers.error !== this.props.fetchAllUsers.error) {\n            return this.props.fetchAllUsers.message || 'Server Error';\n        }\n        if (this.props.promoteUserData.hasError && prevProps.promoteUserData.error !== this.props.promoteUserData.error) {\n            return this.props.promoteUserData.message || 'Server Error';\n        }\n        if (this.props.demoteUserData.hasError && prevProps.demoteUserData.error !== this.props.demoteUserData.error) {\n            return this.props.demoteUserData.message || 'Server Error';\n        }\n\n        return null;\n    }\n\n    promote = (userId) => {\n        this.props.promoteUser(userId);\n    }\n\n    demote = (userId) => {\n        this.props.demoteUser(userId);\n    }\n\n    changeTimeLineUser = (userId) => {\n        this.props.changeTimeLineUser(userId);\n        this.props.history.push(`/home/profile/${userId}`)\n    }\n\n    render() {\n        return (\n            <Fragment>\n                <article className=\"main-article-shared-content\">\n                    <section className=\"profile-content-section\">\n                        <div className=\"container col-md-10 text-center mb-4\">\n                            <h1 className=\"text-center font-weight-bold mt-4\" style={{ 'margin': '1rem auto' }}>All Users</h1>\n                            <table className=\"table table-hover mt-3 w-80 mx-auto text-center\">\n                                <thead>\n                                    <tr className=\"row\">\n                                        <th className=\"col-md-1\" scope=\"col\">#</th>\n                                        <th className=\"col-md-2\" scope=\"col\">Username</th>\n                                        <th className=\"col-md-2\" scope=\"col\">Role</th>\n                                        <th className=\"col-md-7\" scope=\"col\">Actions</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {this.props.userArr.map((user, i) => <UserRow\n                                        key={user.id}\n                                        index={i + 1}\n                                        promote={this.promote}\n                                        demote={this.demote}\n                                        changeTimeLineUser={this.changeTimeLineUser}\n                                        {...user} />)}\n                                </tbody>\n                            </table>\n\n                        </div>\n                    </section>\n                </article>\n            </Fragment>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        timeLineUserData: state.timeLineUserData,\n        loggedInUserData: state.loggedInUserData,\n        userArr: state.fetchAllUsers.userArr,\n        fetchAllUsers: state.fetchAllUsers,\n        promoteUserData: state.promoteUserData,\n        demoteUserData: state.demoteUserData,\n        changeTimeLineUserData: state.changeTimeLineUserData,\n        changePicture: state.changePicture,\n        changeAllFriends: state.changeAllFriends\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        loadAllUsers: (userId) => { dispatch(fetchAllUsersAction(userId)) },\n        promoteUser: (userId) => { dispatch(promoteUserAction(userId)) },\n        demoteUser: (userId) => { dispatch(demoteUserAction(userId)) },\n        changeTimeLineUser: (userId) => { dispatch(changeCurrentTimeLineUserAction(userId)) },\n        changeAllFriends: (userId) => { dispatch(changeAllFriendsAction(userId)) },\n        changeAllPictures: (userId) => { dispatch(changeAllPicturesAction(userId)) },\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserAllPage);"]},"metadata":{},"sourceType":"module"}