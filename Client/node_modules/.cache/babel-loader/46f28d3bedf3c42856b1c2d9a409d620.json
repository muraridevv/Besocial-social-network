{"ast":null,"code":"var _jsxFileName = \"G:\\\\WORKSPACE\\\\Project\\\\Besocial\\\\Besocial\\\\Client\\\\src\\\\infrastructure\\\\userService.js\";\nimport React from 'react';\nimport { toast } from 'react-toastify';\nimport { ToastComponent } from '../components/common';\nvar BASE_URL = 'http://localhost:8000';\nexport default {\n  getBaseUrl: function getBaseUrl() {\n    return BASE_URL;\n  },\n  isAuthenticated: function isAuthenticated() {\n    return window.localStorage.getItem('token') !== null;\n  },\n  getPayload: function getPayload() {\n    var token = localStorage.getItem('token');\n\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n\n      if (payload) {\n        return payload;\n      }\n    }\n  },\n  getUsername: function getUsername() {\n    var token = localStorage.getItem('token');\n\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n\n      if (payload) {\n        return payload['sub'];\n      }\n    }\n  },\n  getUserId: function getUserId() {\n    var token = localStorage.getItem('token');\n\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n\n      if (payload) {\n        return payload['id'];\n      }\n    }\n  },\n  getRole: function getRole() {\n    var token = localStorage.getItem('token');\n\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n\n      if (payload) {\n        return payload['role'];\n      }\n    }\n  },\n  getProfilePicUrl: function getProfilePicUrl() {\n    var token = localStorage.getItem('token');\n\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n\n      if (payload) {\n        return payload['profilePicUrl'];\n      }\n    }\n  },\n  getFirstName: function getFirstName() {\n    var token = localStorage.getItem('token');\n\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n\n      if (payload) {\n        return payload['firstName'];\n      }\n    }\n  },\n  isTheUserLoggedIn: function isTheUserLoggedIn() {\n    var token = localStorage.getItem('token');\n\n    if (token !== null && token !== undefined) {\n      try {\n        var payload = JSON.parse(atob(token.split('.')[1]));\n        var role = payload['role'];\n\n        if (payload) {\n          if (role !== null || role !== undefined) {\n            return true;\n          }\n        }\n      } catch (err) {\n        localStorage.clear();\n        toast.error(React.createElement(ToastComponent.errorToast, {\n          text: 'Unauthorized',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }), {\n          position: toast.POSITION.TOP_RIGHT\n        }); // throw new Error(\"Unauthorized\");\n      }\n    }\n\n    return false;\n  },\n  isRoot: function isRoot() {\n    var token = localStorage.getItem('token');\n\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n      var role = payload['role'];\n\n      if (payload) {\n        if ((role !== null || role !== undefined) && role === 'ROOT') {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  },\n  isAdmin: function isAdmin() {\n    var token = localStorage.getItem('token');\n\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n      var role = payload['role'];\n\n      if (payload) {\n        if ((role !== null || role !== undefined) && (role === 'ADMIN' || role === 'ROOT')) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  },\n  isLoggedInUser: function isLoggedInUser(username) {\n    var token = localStorage.getItem('token');\n\n    if (token !== null && token !== undefined) {\n      var payload = JSON.parse(atob(token.split('.')[1]));\n\n      if (payload) {\n        var loggedInUserName = payload['sub'];\n\n        if (username === loggedInUserName) {\n          return true;\n        }\n\n        return false;\n      }\n    }\n  },\n  checkIfIsRoot: function checkIfIsRoot(role) {\n    if (role === 'ROOT') {\n      return true;\n    }\n\n    return false;\n  },\n  formatUsername: function formatUsername() {\n    var firstName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var lastName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var nameLength = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 18;\n    var name = firstName + ' ' + lastName;\n\n    if (name.length >= nameLength) {\n      return name.substring(0, nameLength) + '...';\n    }\n\n    return name;\n  },\n  getImageSize: function getImageSize(profilePicUrl) {\n    var img = new Image();\n    img.src = profilePicUrl;\n\n    if (img.width >= img.height) {\n      return 'l';\n    }\n\n    return '';\n  }\n};","map":{"version":3,"sources":["G:\\WORKSPACE\\Project\\Besocial\\Besocial\\Client\\src\\infrastructure\\userService.js"],"names":["React","toast","ToastComponent","BASE_URL","getBaseUrl","isAuthenticated","window","localStorage","getItem","getPayload","token","undefined","payload","JSON","parse","atob","split","getUsername","getUserId","getRole","getProfilePicUrl","getFirstName","isTheUserLoggedIn","role","err","clear","error","position","POSITION","TOP_RIGHT","isRoot","isAdmin","isLoggedInUser","username","loggedInUserName","checkIfIsRoot","formatUsername","firstName","lastName","nameLength","name","length","substring","getImageSize","profilePicUrl","img","Image","src","width","height"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { toast } from 'react-toastify';\nimport { ToastComponent } from '../components/common'\n\nconst BASE_URL = 'http://localhost:8000';\n\nexport default {\n    getBaseUrl: () => {\n        return BASE_URL;\n    },\n\n    isAuthenticated: () => {\n        return window.localStorage.getItem('token') !== null\n    },\n\n    getPayload: () => {\n        const token = localStorage.getItem('token')\n\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n            if (payload) {\n                return payload;\n            }\n        }\n    },\n\n    getUsername: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n\n            if (payload) {\n                return payload['sub'];\n            }\n        }\n    },\n\n    getUserId: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n\n            if (payload) {\n                return payload['id'];\n            }\n        }\n    },\n\n    getRole: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n            if (payload) {\n                return payload['role'];\n            }\n        }\n    },\n\n    getProfilePicUrl: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n            if (payload) {\n                return payload['profilePicUrl'];\n            }\n        }\n    },\n\n    getFirstName: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n            if (payload) {\n                return payload['firstName'];\n            }\n        }\n    },\n\n    isTheUserLoggedIn: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            try {\n                const payload = JSON.parse(atob(token.split('.')[1]));\n                const role = payload['role'];\n\n                if (payload) {\n                    if (role !== null || role !== undefined) {\n                        return true;\n                    }\n                }\n            } catch (err) {\n                localStorage.clear();\n                toast.error(<ToastComponent.errorToast text={'Unauthorized'} />, {\n                    position: toast.POSITION.TOP_RIGHT\n                });\n                // throw new Error(\"Unauthorized\");\n            }\n        }\n        return false;\n    },\n\n    isRoot: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n            const role = payload['role'];\n\n            if (payload) {\n                if ((role !== null || role !== undefined) && role === 'ROOT') {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    },\n\n    isAdmin: () => {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n            const role = payload['role'];\n            if (payload) {\n                if ((role !== null || role !== undefined) && (role === 'ADMIN' || role === 'ROOT')) {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    },\n\n\n    isLoggedInUser(username) {\n        const token = localStorage.getItem('token')\n        if (token !== null && token !== undefined) {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n\n            if (payload) {\n                const loggedInUserName = payload['sub'];\n                if (username === loggedInUserName) {\n                    return true;\n                }\n                return false;\n            }\n        }\n    },\n\n    checkIfIsRoot(role) {\n        if (role === 'ROOT') {\n            return true;\n        }\n\n        return false;\n    },\n\n    formatUsername(firstName = '', lastName = '', nameLength = 18) {\n        let name = firstName + ' ' + lastName;\n\n        if (name.length >= nameLength) {\n            return name.substring(0, nameLength) + '...';\n        }\n        return name;\n    },\n\n    getImageSize(profilePicUrl) {\n        let img = new Image();\n        img.src = profilePicUrl;\n\n        if (img.width >= img.height) {\n            return 'l'\n        }\n\n        return '';\n    }\n} "]},"metadata":{},"sourceType":"module"}